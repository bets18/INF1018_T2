1. O QUE ESTÁ FUNCIONANDO
O gerador de código foi implementado completamente, atendendo a todas as especificações da linguagem LBS e gerando código de máquina x86-64 funcional.

Funcionalidades operacionais:
- Gerenciamento de Pilha: O prólogo e epílogo alocam e desalocam corretamente o Registro de Ativação (Stack Frame), reservando 32 bytes para variáveis locais e garantindo o alinhamento de 16 bytes exigido pelo GCC/Linux.
- Aritmética e Atribuição: Implementação completa de soma, subtração e multiplicação, permitindo operações entre constantes, parâmetros e variáveis locais armazenadas na pilha.
- Controle de Fluxo (zret): O retorno condicional funciona corretamente utilizando instruções de comparação (cmp) e salto condicional (jne).
- Funções e Recursão (call): A chamada de função foi implementada com cálculo de endereçamento relativo e passagem de parâmetros via registrador %edi, suportando chamadas aninhadas e recursão.

2. PRINCIPAIS DIFICULDADES ENCONTRADAS
O desenvolvimento do gerador apresentou desafios técnicos específicos da tradução para Assembly:

A. Cálculo de Endereços Relativos (Instrução Call):
Tivemos dificuldade inicial para entender como o processador calcula o destino do salto na instrução 'call' (opcode E8). Nossos primeiros testes pulavam para lugares errados da memória. Descobrimos, via depuração com objdump, que o offset é calculado a partir do final da instrução. Foi necessário ajustar a fórmula matemática no código C para subtrair os 5 bytes da própria instrução do endereço de destino.

B. Implementação do 'zret' (Backpatching):
Gerar código para o comando 'zret' foi desafiador porque ele exige um salto para frente (pular o retorno se não for zero), mas, no momento da leitura, não sabíamos o tamanho das instruções de retorno que viriam a seguir. A solução foi escrever um "placeholder" (0x00) no código de máquina, gerar as instruções de retorno, calcular a distância percorrida e voltar no vetor para corrigir o byte do salto (técnica de backpatching).

C. Parsing do Arquivo de Entrada:
O interpretador fornecido era sensível a quebras de linha e espaços. Enfrentamos problemas onde o comando 'end' não era reconhecido se não houvesse uma quebra de linha final. Tivemos que refinar a lógica de leitura de caracteres (fgetc/ungetc) para tornar o parser mais robusto e ignorar espaços em branco indesejados.

3. EXEMPLOS DE TESTES REALIZADOS

Abaixo estão os exemplos utilizados para validar o gerador. Os testes foram executados via terminal passando o valor de entrada como argumento.

[Teste 01] Identidade
Arquivo: teste1.lbs (Retorna o próprio parâmetro)
Comando: ./gerador teste1.lbs 10
Resultado Obtido: 10 (Sucesso)

[Teste 02] Constante Negativa
Arquivo: teste2.lbs (Retorna sempre -99)
Comando: ./gerador teste2.lbs 0
Resultado Obtido: -99 (Sucesso)

[Teste 03] Soma de Variáveis Locais
Arquivo: teste3.lbs (Usa v0 e v1 para somar p0 + 10 + p0 + 20)
Comando: ./gerador teste3.lbs 5
Resultado Esperado: (5+10) + (5+20) = 40
Resultado Obtido: 40 (Sucesso)

[Teste 04] Polinômio Matemático
Arquivo: teste4.lbs (Calcula 2x^2 - 3x + 5)
Comando: ./gerador teste4.lbs 4
Resultado Esperado: 2(16) - 12 + 5 = 25
Resultado Obtido: 25 (Sucesso)

[Teste 05] Lógica com zret
Arquivo: teste5.lbs (Retorna 0 se entrada for 0, caso contrário retorna 1)
Comando A: ./gerador teste5.lbs 0  -> Resultado: 0
Comando B: ./gerador teste5.lbs 50 -> Resultado: 1
(Sucesso)

[Teste 06] Contagem Regressiva
Arquivo: teste6.lbs (Usa zret para verificar valor e subtrair)
Comando: ./gerador teste6.lbs 10
Resultado Obtido: 9 (Sucesso)

[Teste 07] Estresse de Pilha
Arquivo: teste7.lbs (Usa todas as variáveis locais v0..v4 somando constantes)
Comando: ./gerador teste7.lbs 0
Resultado Esperado: 1+2+3+4+5 = 15
Resultado Obtido: 15 (Sucesso)

[Teste 08] Chamada de Função Simples
Arquivo: teste8.lbs (Função principal chama auxiliar que dobra o valor)
Comando: ./gerador teste8.lbs 10
Resultado Esperado: (10 * 2) + 1 = 21
Resultado Obtido: 21 (Sucesso)

[Teste 09] Recursão (Soma de 1 até N)
Arquivo: teste9.lbs (Função recursiva clássica)
Comando: ./gerador teste9.lbs 4
Resultado Esperado: 4+3+2+1 = 10
Resultado Obtido: 10 (Sucesso)

[Teste 10] Potência de Potência
Arquivo: teste10.lbs (Calcula (x^2)^2 chamando função de quadrado duas vezes)
Comando: ./gerador teste10.lbs 3
Resultado Esperado: (3^2)^2 = 81
Resultado Obtido: 81 (Sucesso)